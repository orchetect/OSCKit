{"topicSections":[{"anchor":"Topics","identifiers":["doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressPattern","doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressSpace"]}],"kind":"article","variants":[{"paths":["\/documentation\/osckitcore\/osc-address-pattern-parsing"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"seeAlsoSections":[{"title":"OSC Messages","anchor":"OSC-Messages","identifiers":["doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCMessage","doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSC-Value-Types","doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSC-Value-Parsing"],"generated":true}],"abstract":[{"type":"text","text":"Methods for parsing OSC Message address patterns."}],"sections":[],"primaryContentSections":[{"content":[{"type":"heading","text":"Overview","level":2,"anchor":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"There are a few approaches to parsing OSC message address patterns, depending on your needs."}]},{"type":"heading","text":"Background","level":2,"anchor":"Background"},{"type":"paragraph","inlineContent":[{"text":"An OSC Method is defined as being the last path component in the address. OSC Methods are the","type":"text"},{"text":" ","type":"text"},{"text":"potential destinations of OSC messages received by the OSC server and correspond to each of the","type":"text"},{"text":" ","type":"text"},{"text":"points of control that the application makes available.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"methodname"},{"type":"text","text":" path component is the method name in the following address examples:"}]},{"type":"codeListing","code":["\/methodname","\/container1\/container2\/methodname"],"syntax":null},{"type":"paragraph","inlineContent":[{"type":"text","text":"Any other path components besides the last are referred to as "},{"inlineContent":[{"type":"text","text":"containers"}],"type":"emphasis"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A container may also be a method. Simply register it the same way as other methods."}]},{"type":"heading","text":"Imperative address pattern matching","level":3,"anchor":"Imperative-address-pattern-matching"},{"type":"paragraph","inlineContent":[{"text":"Simple matching can be performed using the ","type":"text"},{"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressPattern\/matches(localAddress:)","isActive":true,"type":"reference"},{"text":" method directly on the message’s ","type":"text"},{"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCMessage\/addressPattern","isActive":true,"type":"reference"},{"text":" property.","type":"text"}]},{"type":"codeListing","code":["\/\/ example: received OSC message with address \"\/{some,other}\/address\/*\"","private func handle(message: OSCMessage, host: String, port: UInt16) throws {","    let pattern = message.addressPattern","    if pattern.matches(localAddress: \"\/some\/address\/methodA\") { ","        \/\/ (will match in this example)","        \/\/ ... perform methodA action using message.values ...","    }","    if pattern.matches(localAddress: \"\/some\/address\/methodB\") {","        \/\/ (will match in this example)","        \/\/ ... perform methodB action using message.values ...","    }","    if pattern.matches(localAddress: \"\/different\/address\/methodC\") {","        \/\/ (won't match in this example)","        \/\/ ... perform methodC action using message.values ...","    }","}"],"syntax":"swift"},{"type":"heading","text":"Using OSCAddressSpace for automated address pattern matching","anchor":"Using-OSCAddressSpace-for-automated-address-pattern-matching","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"OSCKit provides an abstraction called "},{"type":"reference","isActive":true,"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressSpace"},{"type":"text","text":". This object is generally instanced once and stored globally."}]},{"type":"paragraph","inlineContent":[{"text":"Each local OSC address (OSC Method) must be registered once with this object in order to enable it to perform matching against received OSC message address patterns. Each method is assigned an ID, and can optionally store a closure.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Method IDs, method closures, or a combination of both may be used for maximum flexibility.","type":"text"}]},{"type":"heading","text":"OSCAddressSpace with Method IDs","anchor":"OSCAddressSpace-with-Method-IDs","level":4},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Using Default UUID Method ID Type"}]},{"type":"paragraph","inlineContent":[{"text":"If not specified, the method ID type used is ","type":"text"},{"type":"codeVoice","code":"UUID"},{"text":".","type":"text"}]},{"code":["\/\/ instance address space and register methods only once, usually at app startup.","let addressSpace = OSCAddressSpace() \/\/ uses UUID method ID type"],"syntax":"swift","type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Registration will return a unique ID token to correspond to each method that is registered. This can be stored and used to identify methods that "},{"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressSpace","type":"reference","isActive":true},{"type":"text","text":" matches for you."}]},{"code":["let idMethodA = await addressSpace.register(localAddress: \"\/methodA\")","let idMethodB = await addressSpace.register(localAddress: \"\/some\/address\/methodB\")"],"syntax":"swift","type":"codeListing"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Using a Custom Method ID Type"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A custom type may be used to identify methods instead of the default "},{"type":"codeVoice","code":"UUID"},{"type":"text","text":"."}]},{"syntax":"swift","type":"codeListing","code":["enum OSCMethodID: Equatable, Hashable, Sendable {","    case methodA","    case methodB","}","","\/\/ instance address space and register methods only once, usually at app startup.","let addressSpace = OSCAddressSpace<OSCMethodID>()"]},{"type":"paragraph","inlineContent":[{"text":"Registration will not return an ID. Instead, supply the ID to be used to the registration method.","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["await addressSpace.register(localAddress: \"\/methodA\", id: .methodA)","await addressSpace.register(localAddress: \"\/some\/address\/methodB\", id: .methodB)"]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"text":"When an OSC message is received:","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Pass its address pattern to "},{"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressSpace\/methods(matching:)","type":"reference","isActive":true},{"type":"text","text":"."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This method will pattern-match it against all registered local addresses and return an array of local method IDs that match."}]}]},{"content":[{"inlineContent":[{"text":"You can then compare the IDs to ones you stored while registering the local methods.","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"codeListing","code":["func handle(message: OSCMessage, host: String, port: UInt16) async throws {","    let ids = await addressSpace.methods(matching: message.addressPattern)","    ","    for id in ids {","        switch id {","        case idMethodA:","            let str = try message.values.masked(String.self)","            performMethodA(str)","        case idMethodB:","            let (str, int) = try message.values.masked(String.self, Int?.self)","            performMethodB(str, int)","        default:","            print(\"Received unhandled OSC message:\", message)","        }","    }","}","","func performMethodA(_ str: String) { }","func performMethodB(_ str: String, _ int: Int?) { }"],"syntax":"swift"},{"type":"heading","text":"OSCAddressSpace with Method Closure Blocks","anchor":"OSCAddressSpace-with-Method-Closure-Blocks","level":4},{"type":"paragraph","inlineContent":[{"type":"text","text":"When registering a local method, it can also store a closure. This closure can be executed automatically when matching against a received OSC message’s address pattern. In this case you may discard the method ID returned by the registration method."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When an OSC message is received:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Pass its address pattern to the ","type":"text"},{"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressSpace\/dispatch(message:host:port:)","type":"reference","isActive":true},{"text":".","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"This method will pattern-match it against all registered local addresses and execute their closures.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"It also returns an array of local method IDs that match exactly like ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressSpace\/methods(matching:)"},{"text":" (which may be discarded if handling of unregistered\/unrecognized methods is not needed).","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"If the returned method ID array is empty, that indicates that no methods matched the address pattern. In this case you may want to handle the unhandled message in a special way.","type":"text"}],"type":"paragraph"}]}]},{"type":"codeListing","code":["\/\/ instance address space and register methods only once, usually at app startup.","let addressSpace = OSCAddressSpace()","await addressSpace.register(localAddress: \"\/methodA\") { values, host, port in","    guard let str = try? message.values.masked(String.self) else { return }","    performMethodA(str)","}","await addressSpace.register(localAddress: \"\/some\/address\/methodB\") { values, host, port in","    guard let (str, int) = try message.values.masked(String.self, Int?.self) else { return }","    performMethodB(str, int)","}"],"syntax":"swift"},{"type":"codeListing","code":["func handle(message: OSCMessage, host: String, port: UInt16) async throws {","    let ids = await addressSpace.dispatch(message: message, host: host, port: port)","    if ids.isEmpty {","        print(\"Received unhandled OSC message:\", message)","    }","}","","func performMethodA(_ str: String) { }","func performMethodB(_ str: String, _ int: Int?) { }"],"syntax":"swift"}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/OSCKitCore\/documentation\/OSCKitCore"]]},"metadata":{"title":"OSC Address Pattern Parsing","modules":[{"name":"OSCKitCore"}],"roleHeading":"API Collection","role":"collectionGroup"},"identifier":{"url":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSC-Address-Pattern-Parsing","interfaceLanguage":"swift"},"references":{"doc://OSCKitCore/documentation/OSCKitCore/OSCMessage/addressPattern":{"title":"addressPattern","type":"topic","url":"\/documentation\/osckitcore\/oscmessage\/addresspattern","identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCMessage\/addressPattern","kind":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"addressPattern","kind":"identifier"},{"text":": ","kind":"text"},{"text":"OSCAddressPattern","kind":"typeIdentifier","preciseIdentifier":"s:10OSCKitCore17OSCAddressPatternV"}],"role":"symbol","abstract":[{"type":"text","text":"OSC message address pattern."}]},"doc://OSCKitCore/documentation/OSCKitCore/OSCAddressPattern/matches(localAddress:)":{"url":"\/documentation\/osckitcore\/oscaddresspattern\/matches(localaddress:)","abstract":[{"text":"Returns ","type":"text"},{"code":"true","type":"codeVoice"},{"text":" if the address matches a given local address.","type":"text"},{"text":" ","type":"text"},{"text":"Employs address pattern matching if the inbound address contains a pattern.","type":"text"}],"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressPattern\/matches(localAddress:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"matches"},{"kind":"text","text":"("},{"kind":"externalParam","text":"localAddress"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:Sb","text":"Bool"}],"kind":"symbol","title":"matches(localAddress:)","role":"symbol","type":"topic"},"doc://OSCKitCore/documentation/OSCKitCore/OSCMessage":{"abstract":[{"type":"text","text":"OSC Message."}],"navigatorTitle":[{"text":"OSCMessage","kind":"identifier"}],"title":"OSCMessage","type":"topic","identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCMessage","kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"OSCMessage","kind":"identifier"}],"role":"symbol","url":"\/documentation\/osckitcore\/oscmessage"},"doc://OSCKitCore/documentation/OSCKitCore/OSCAddressSpace":{"title":"OSCAddressSpace","navigatorTitle":[{"kind":"identifier","text":"OSCAddressSpace"}],"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressSpace","type":"topic","url":"\/documentation\/osckitcore\/oscaddressspace","abstract":[{"type":"text","text":"OSC address space populated with a local address tree by registering OSC methods, offering"},{"type":"text","text":" "},{"type":"text","text":"methods to match and dispatch against received OSC address patterns."}],"kind":"symbol","role":"symbol","fragments":[{"kind":"keyword","text":"actor"},{"kind":"text","text":" "},{"kind":"identifier","text":"OSCAddressSpace"}]},"doc://OSCKitCore/documentation/OSCKitCore/OSCAddressSpace/methods(matching:)":{"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressSpace\/methods(matching:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"methods"},{"kind":"text","text":"("},{"kind":"externalParam","text":"matching"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:10OSCKitCore17OSCAddressPatternV","text":"OSCAddressPattern"},{"kind":"text","text":") -> ["},{"kind":"typeIdentifier","text":"MethodID"},{"kind":"text","text":"]"}],"title":"methods(matching:)","abstract":[{"type":"text","text":"Returns all OSC address nodes matching the address pattern."}],"type":"topic","kind":"symbol","url":"\/documentation\/osckitcore\/oscaddressspace\/methods(matching:)","role":"symbol","conformance":{"constraints":[{"code":"MethodID","type":"codeVoice"},{"type":"text","text":" conforms to "},{"code":"Hashable","type":"codeVoice"},{"type":"text","text":" and "},{"code":"Sendable","type":"codeVoice"},{"type":"text","text":"."}],"conformancePrefix":[{"type":"text","text":"Conforms when"}],"availabilityPrefix":[{"type":"text","text":"Available when"}]}},"doc://OSCKitCore/documentation/OSCKitCore":{"role":"collection","url":"\/documentation\/osckitcore","identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore","title":"OSCKitCore","abstract":[{"text":"Core OSC value types, address parsing, and value type masking.","type":"text"}],"type":"topic","kind":"symbol"},"doc://OSCKitCore/documentation/OSCKitCore/OSCAddressPattern":{"title":"OSCAddressPattern","role":"symbol","identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressPattern","kind":"symbol","url":"\/documentation\/osckitcore\/oscaddresspattern","type":"topic","abstract":[{"text":"OSC Address Pattern","type":"text"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"OSCAddressPattern","kind":"identifier"}],"navigatorTitle":[{"text":"OSCAddressPattern","kind":"identifier"}]},"doc://OSCKitCore/documentation/OSCKitCore/OSCAddressSpace/dispatch(message:host:port:)":{"type":"topic","title":"dispatch(message:host:port:)","role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"dispatch","kind":"identifier"},{"text":"(","kind":"text"},{"text":"message","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"OSCMessage","preciseIdentifier":"s:10OSCKitCore10OSCMessageV","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"host","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"String","preciseIdentifier":"s:SS","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"port","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"UInt16","preciseIdentifier":"s:s6UInt16V","kind":"typeIdentifier"},{"text":") -> [","kind":"text"},{"text":"MethodID","kind":"typeIdentifier"},{"text":"]","kind":"text"}],"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSCAddressSpace\/dispatch(message:host:port:)","abstract":[{"type":"text","text":"Executes the closure blocks (and passes the OSC message values to them) for all local OSC"},{"type":"text","text":" "},{"type":"text","text":"address nodes matching the address pattern in the OSC message."}],"kind":"symbol","url":"\/documentation\/osckitcore\/oscaddressspace\/dispatch(message:host:port:)","conformance":{"constraints":[{"code":"MethodID","type":"codeVoice"},{"type":"text","text":" conforms to "},{"code":"Hashable","type":"codeVoice"},{"type":"text","text":" and "},{"code":"Sendable","type":"codeVoice"},{"type":"text","text":"."}],"conformancePrefix":[{"type":"text","text":"Conforms when"}],"availabilityPrefix":[{"type":"text","text":"Available when"}]}},"doc://OSCKitCore/documentation/OSCKitCore/OSC-Value-Types":{"role":"collectionGroup","title":"OSC Value Types","url":"\/documentation\/osckitcore\/osc-value-types","kind":"article","identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSC-Value-Types","type":"topic","abstract":[{"type":"text","text":"OSC Message value types."}]},"doc://OSCKitCore/documentation/OSCKitCore/OSC-Value-Parsing":{"identifier":"doc:\/\/OSCKitCore\/documentation\/OSCKitCore\/OSC-Value-Parsing","url":"\/documentation\/osckitcore\/osc-value-parsing","type":"topic","title":"OSC Value Parsing","kind":"article","role":"collectionGroup","abstract":[{"type":"text","text":"Methods for parsing OSC Message value collections."}]}}}